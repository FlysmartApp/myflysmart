var G=Object.defineProperty;var Z=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var Q=Object.prototype.hasOwnProperty;var z=(s,i)=>()=>(s&&(i=s(s=0)),i);var H=(s,i,$,d)=>{if(i&&typeof i=="object"||typeof i=="function")for(let f of V(i))!Q.call(s,f)&&f!==$&&G(s,f,{get:()=>i[f],enumerable:!(d=Z(i,f))||d.enumerable});return s},X=(s,i,$)=>(H(s,i,"default"),$&&H($,i,"default"));var J=s=>H(G({},"__esModule",{value:!0}),s);var C={};import*as ot from"async_hooks";var Y=z(()=>{X(C,ot)});import{__getNamedExports as ee}from"../../../../__next-on-pages-dist__/webpack/86424719af23aa3886a5e25a3e0c6ade.js";import{__getNamedExports as te}from"../../../../__next-on-pages-dist__/webpack/6051.js";import{__getNamedExports as _e}from"../../../../__next-on-pages-dist__/manifest/27d10e462fba646daaa29468a0656e12.js";var R=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/flights/search"),t=ee(R,R,R),ae=t.__chunk_6195,ne=t.__chunk_2067,re=t.__chunk_1548,oe=t.__chunk_2780,ce=t.__chunk_5612,se=t.__chunk_5524,ue=t.__chunk_8536,ie=t.__chunk_6765,le=t.__chunk_9814,pe=t.__chunk_9859,he=t.__chunk_9307,de=t.__chunk_74,fe=t.__chunk_4123,ye=t.__chunk_3412,ke=t.__chunk_8978,ge=t.__chunk_1812,me=t.__chunk_1673,xe=t.__chunk_7398,Ne=t.__chunk_5376,ve=t.__chunk_6617,Re=t.__chunk_5767,Ee=t.__chunk_8260,Te=t.__chunk_5027,Se=t.__chunk_2738,be=t.__chunk_2113,we=t.__chunk_5065,Ae=t.__chunk_5514,Oe=t.__chunk_2860,Ie=t.__chunk_5257,Fe=t.__chunk_8427,$e=t.__chunk_8997,Le=t.__chunk_8024,Pe=t.__chunk_2403,Ce=t.__chunk_8690,Me=t.__chunk_6265,De=t.__chunk_5492,je=t.__chunk_3059,Ue=t.__chunk_8610,Be=t.__chunk_7959,Ke=t.__chunk_4303,He=t.__chunk_3326,Xe=t.__chunk_391,qe=t.__chunk_8789,We=t.__chunk_552,Ge=t.__chunk_7649,Ye=t.__chunk_2501,Ze=t.__chunk_6443,Ve=t.__chunk_1616,Qe=t.__chunk_2034,ze=t.__chunk_3131,Je=t.__chunk_2328,et=te(R,R,R),tt=et.__chunk_6051,q=_e(R,R,R),_t=q.__NEXT_FONT_MANIFEST,at=q.__REACT_LOADABLE_MANIFEST,nt=q.__BUILD_MANIFEST,it=((s,i,$)=>(i._ENTRIES={},s.__BUILD_MANIFEST=nt,s.__REACT_LOADABLE_MANIFEST=at,s.__NEXT_FONT_MANIFEST=_t,s.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",s.__PRERENDER_MANIFEST='{"version":4,"routes":{"/":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/page,_N_T_/"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/","dataRoute":"/index.rsc"},"/about":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/about/layout,_N_T_/about/page,_N_T_/about"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/about","dataRoute":"/about.rsc"},"/contact":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/contact/layout,_N_T_/contact/page,_N_T_/contact"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/contact","dataRoute":"/contact.rsc"},"/terms":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/terms/layout,_N_T_/terms/page,_N_T_/terms"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/terms","dataRoute":"/terms.rsc"},"/affiliate-disclosure":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/affiliate-disclosure/layout,_N_T_/affiliate-disclosure/page,_N_T_/affiliate-disclosure"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/affiliate-disclosure","dataRoute":"/affiliate-disclosure.rsc"},"/status":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/status/layout,_N_T_/status/page,_N_T_/status"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/status","dataRoute":"/status.rsc"},"/flights":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/flights/layout,_N_T_/flights/page,_N_T_/flights"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/flights","dataRoute":"/flights.rsc"},"/privacy":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/privacy/layout,_N_T_/privacy/page,_N_T_/privacy"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/privacy","dataRoute":"/privacy.rsc"},"/hotels":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/hotels/layout,_N_T_/hotels/page,_N_T_/hotels"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/hotels","dataRoute":"/hotels.rsc"}},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"process.env.__NEXT_PREVIEW_MODE_ID","previewModeSigningKey":"process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY","previewModeEncryptionKey":"process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY"}}',(()=>{"use strict";var d={},f={};function n(_){var u=f[_];if(u!==void 0)return u.exports;var c=f[_]={exports:{}},y=!0;try{d[_](c,c.exports,n),y=!1}finally{y&&delete f[_]}return c.exports}n.m=d,n.amdO={},(()=>{var _=[];n.O=(u,c,y,k)=>{if(c){k=k||0;for(var l=_.length;l>0&&_[l-1][2]>k;l--)_[l]=_[l-1];_[l]=[c,y,k];return}for(var g=1/0,l=0;l<_.length;l++){for(var[c,y,k]=_[l],h=!0,N=0;N<c.length;N++)g>=k&&Object.keys(n.O).every(F=>n.O[F](c[N]))?c.splice(N--,1):(h=!1,k<g&&(g=k));if(h){_.splice(l--,1);var b=y();b!==void 0&&(u=b)}}return u}})(),n.n=_=>{var u=_&&_.__esModule?()=>_.default:()=>_;return n.d(u,{a:u}),u},n.d=(_,u)=>{for(var c in u)n.o(u,c)&&!n.o(_,c)&&Object.defineProperty(_,c,{enumerable:!0,get:u[c]})},n.e=()=>Promise.resolve(),n.g=function(){if(typeof i=="object")return i;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),n.o=(_,u)=>Object.prototype.hasOwnProperty.call(_,u),n.r=_=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},(()=>{var _={993:0};n.O.j=y=>_[y]===0;var u=(y,k)=>{var l,g,[h,N,b]=k,A=0;if(h.some(I=>_[I]!==0)){for(l in N)n.o(N,l)&&(n.m[l]=N[l]);if(b)var L=b(n)}for(y&&y(k);A<h.length;A++)g=h[A],n.o(_,g)&&_[g]&&_[g][0](),_[g]=0;return n.O(L)},c=s.webpackChunk_N_E=s.webpackChunk_N_E||[];c.forEach(u.bind(null,0)),c.push=u.bind(null,c.push.bind(c))})()})(),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[755],{2328:Je,3131:ze,2034:Qe,1616:Ve,6443:Ze,2501:Ye,7649:Ge,552:We,8789:qe,391:Xe,3326:He,4303:Ke,7959:Be,8610:Ue,3059:je,5492:De,6265:Me,8690:Ce,2403:Pe,8024:Le,8997:$e,8427:Fe,5257:Ie,2860:Oe,5514:Ae,5065:we,2113:be,2738:Se,5027:Te,8260:Ee,5767:Re,6617:ve,5376:Ne,7398:xe,1673:me,1812:ge,8978:ke,3412:ye,4123:fe,74:de,9307:he,9859:pe,9814:le,6765:ie,8536:ue,5524:se,5612:ce,2780:oe,1548:re}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[51],{6051:tt}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[472],{2067:ne,6195:ae,6263:(d,f,n)=>{"use strict";n.r(f),n.d(f,{ComponentMod:()=>U,default:()=>B});var _={};n.r(_),n.d(_,{POST:()=>L,runtime:()=>N});var u={};n.r(u),n.d(u,{originalPathname:()=>D,patchFetch:()=>j,requestAsyncStorage:()=>P,routeModule:()=>I,serverHooks:()=>M,staticGenerationAsyncStorage:()=>F});var c=n(8260),y=n(5514),k=n(2860),l=n(2113),g=n(5492),h=n(6051);let N="edge",b=h.Ry({from:h.Z_().length(3),to:h.Z_().length(3),dateFrom:h.Z_(),dateTo:h.Z_().optional(),adults:h.Rx().min(1).max(9).default(1),currency:h.Z_().default("SAR")}),A=[{from:"RUH",to:"DXB",airline:"\u0637\u064A\u0631\u0627\u0646 \u0627\u0644\u0633\u0639\u0648\u062F\u064A\u0629",direct:!0,departLocal:"2025-02-15T08:00:00",arriveLocal:"2025-02-15T11:30:00",price:1250,currency:"SAR",deepLink:"#"},{from:"RUH",to:"DXB",airline:"\u0637\u064A\u0631\u0627\u0646 \u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062A",direct:!0,departLocal:"2025-02-15T14:00:00",arriveLocal:"2025-02-15T17:30:00",price:1450,currency:"SAR",deepLink:"#"},{from:"RUH",to:"DXB",airline:"\u0641\u0644\u0627\u064A \u062F\u0628\u064A",direct:!1,departLocal:"2025-02-15T22:00:00",arriveLocal:"2025-02-16T03:30:00",price:950,currency:"SAR",deepLink:"#"}];async function L(K){try{let S=await K.json(),x=b.parse(S),E=process.env.TEQUILA_API_KEY,e=process.env.KIWI_AFFILIATE_ID;if(!E)return g.xk.json({success:!0,data:A,mock:!0});let o=p=>{let T=new Date(p);return`${T.getDate().toString().padStart(2,"0")}/${(T.getMonth()+1).toString().padStart(2,"0")}/${T.getFullYear()}`},r=new URLSearchParams({fly_from:x.from,fly_to:x.to,date_from:o(x.dateFrom),date_to:o(x.dateTo??x.dateFrom),adults:String(x.adults),curr:x.currency,locale:"ar",limit:"20"}),a=await fetch(`https://tequila-api.kiwi.com/v2/search?${r}`,{headers:{apikey:E}});if(!a.ok)throw Error(`Kiwi API status ${a.status}`);let v=await a.json(),m=(v.data??[]).map(p=>({from:p.flyFrom,to:p.flyTo,airline:p.airlines?.[0]||"Unknown",direct:(p.route?.length??0)<=1,departLocal:new Date(1e3*p.dTime).toISOString(),arriveLocal:new Date(1e3*p.aTime).toISOString(),price:p.price,currency:v.currency||x.currency,deepLink:`https://www.kiwi.com/deep?from=${p.flyFrom}&to=${p.flyTo}&departure=${x.dateFrom}&adults=${x.adults}&currency=${x.currency}${e?`&affilid=${e}`:""}`}));return g.xk.json({success:!0,data:m,mock:!1})}catch(S){return console.error("Flight search error",S),g.xk.json({success:!0,data:A,mock:!0,error:"fallback"})}}let I=new y.AppRouteRouteModule({definition:{kind:k.x.APP_ROUTE,page:"/api/flights/search/route",pathname:"/api/flights/search",filename:"route",bundlePath:"app/api/flights/search/route"},resolvedPagePath:"/Users/meshalalsalem/Desktop/myflysmart/app/api/flights/search/route.ts",nextConfigOutput:"",userland:_}),{requestAsyncStorage:P,staticGenerationAsyncStorage:F,serverHooks:M}=I,D="/api/flights/search/route";function j(){return(0,l.XH)({serverHooks:M,staticGenerationAsyncStorage:F})}let U=u,B=c.a.wrap(I)}},d=>{var f=_=>d(d.s=_);d.O(0,[755,51],()=>f(6263));var n=d.O();(i._ENTRIES=typeof i._ENTRIES>"u"?{}:i._ENTRIES)["middleware_app/api/flights/search/route"]=n}]),function(){let d={exports:{},loaded:!1};return function(n,_){var u=Object.create,c=Object.defineProperty,y=Object.getOwnPropertyDescriptor,k=Object.getOwnPropertyNames,l=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,h=e=>c(e,"__esModule",{value:!0}),N=(e,o)=>{h(e);for(var r in o)c(e,r,{get:o[r],enumerable:!0})},b=(e,o,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let a of k(o))!g.call(e,a)&&a!=="default"&&c(e,a,{get:()=>o[a],enumerable:!(r=y(o,a))||r.enumerable});return e},A=e=>b(h(c(e!=null?u(l(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);N(_,{default:()=>K});var L=A((Y(),J(C))),I="@next/request-context",P=Symbol.for(I),F=Symbol.for("internal.storage");function M(){let e=i;if(!e[P]){let o=new L.AsyncLocalStorage,r={get:()=>o.getStore(),[F]:o};e[P]=r}return e[P]}var D=M();function j(e,o){return D[F].run(e,o)}function U(e){let o={};return e&&e.forEach((r,a)=>{o[a]=r,a.toLowerCase()==="set-cookie"&&(o[a]=B(r))}),o}function B(e){let o=[],r=0,a,v,m,p,T;function w(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function O(){return v=e.charAt(r),v!=="="&&v!==";"&&v!==","}for(;r<e.length;){for(a=r,T=!1;w();)if(v=e.charAt(r),v===","){for(m=r,r+=1,w(),p=r;r<e.length&&O();)r+=1;r<e.length&&e.charAt(r)==="="?(T=!0,r=p,o.push(e.substring(a,m)),a=r):r=m+1}else r+=1;(!T||r>=e.length)&&o.push(e.substring(a,e.length))}return o}function K(e){let o=e.staticRoutes.map(a=>({regexp:new RegExp(a.namedRegex),page:a.page})),r=e.dynamicRoutes?.map(a=>({regexp:new RegExp(a.namedRegex),page:a.page}))||[];return async function(a,v){let m=new URL(a.url).pathname,p={};if(e.nextConfig?.basePath&&m.startsWith(e.nextConfig.basePath)&&(m=m.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let w of e.nextConfig.i18n.locales){let O=new RegExp(`^/${w}($|/)`,"i");if(m.match(O)){m=m.replace(O,"/")||"/";break}}for(let w of o)if(w.regexp.exec(m)){p.name=w.page;break}if(!p.name){let w=x(m);for(let O of r||[]){if(w&&!x(O.page))continue;let W=O.regexp.exec(m);if(W){p={name:O.page,params:W.groups};break}}}let T=await j({waitUntil:v.waitUntil},()=>i._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:a.url,method:a.method,headers:U(a.headers),ip:S(a.headers,E.Ip),geo:{city:S(a.headers,E.City,!0),country:S(a.headers,E.Country,!0),latitude:S(a.headers,E.Latitude),longitude:S(a.headers,E.Longitude),region:S(a.headers,E.Region,!0)},nextConfig:e.nextConfig,page:p,body:a.body}}));return T.waitUntil&&v.waitUntil(T.waitUntil),T.response}}function S(e,o,r=!1){let a=e.get(o)||void 0;return r&&a?decodeURIComponent(a):a}function x(e){return e==="/api"||e.startsWith("/api/")}var E;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(E||(E={}))}(d,d.exports),d.exports}.call({}).default({name:"app/api/flights/search/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/about",regex:"^/about(?:/)?$",routeKeys:{},namedRegex:"^/about(?:/)?$"},{page:"/affiliate-disclosure",regex:"^/affiliate\\-disclosure(?:/)?$",routeKeys:{},namedRegex:"^/affiliate\\-disclosure(?:/)?$"},{page:"/contact",regex:"^/contact(?:/)?$",routeKeys:{},namedRegex:"^/contact(?:/)?$"},{page:"/flights",regex:"^/flights(?:/)?$",routeKeys:{},namedRegex:"^/flights(?:/)?$"},{page:"/hotels",regex:"^/hotels(?:/)?$",routeKeys:{},namedRegex:"^/hotels(?:/)?$"},{page:"/privacy",regex:"^/privacy(?:/)?$",routeKeys:{},namedRegex:"^/privacy(?:/)?$"},{page:"/status",regex:"^/status(?:/)?$",routeKeys:{},namedRegex:"^/status(?:/)?$"},{page:"/terms",regex:"^/terms(?:/)?$",routeKeys:{},namedRegex:"^/terms(?:/)?$"}],dynamicRoutes:[],nextConfig:{basePath:"",i18n:{locales:["ar","en"],defaultLocale:"ar"}}})))(R,R,R);export{it as default};
