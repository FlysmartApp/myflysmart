var G=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var Y=Object.getOwnPropertyNames;var z=Object.prototype.hasOwnProperty;var J=(s,i)=>()=>(s&&(i=s(s=0)),i);var H=(s,i,$,k)=>{if(i&&typeof i=="object"||typeof i=="function")for(let y of Y(i))!z.call(s,y)&&y!==$&&G(s,y,{get:()=>i[y],enumerable:!(k=V(i,y))||k.enumerable});return s},X=(s,i,$)=>(H(s,i,"default"),$&&H($,i,"default"));var Q=s=>H(G({},"__esModule",{value:!0}),s);var M={};import*as ot from"async_hooks";var Z=J(()=>{X(M,ot)});import{__getNamedExports as ee}from"../../../../__next-on-pages-dist__/webpack/86424719af23aa3886a5e25a3e0c6ade.js";import{__getNamedExports as te}from"../../../../__next-on-pages-dist__/webpack/6051.js";import{__getNamedExports as ne}from"../../../../__next-on-pages-dist__/manifest/27d10e462fba646daaa29468a0656e12.js";var v=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/hotels/search"),t=ee(v,v,v),_e=t.__chunk_6195,ae=t.__chunk_2067,re=t.__chunk_1548,oe=t.__chunk_2780,ce=t.__chunk_5612,se=t.__chunk_5524,ue=t.__chunk_8536,ie=t.__chunk_6765,le=t.__chunk_9814,he=t.__chunk_9859,pe=t.__chunk_9307,de=t.__chunk_74,ke=t.__chunk_4123,ye=t.__chunk_3412,ge=t.__chunk_8978,fe=t.__chunk_1812,me=t.__chunk_1673,xe=t.__chunk_7398,Ne=t.__chunk_5376,Re=t.__chunk_6617,ve=t.__chunk_5767,Ee=t.__chunk_8260,Te=t.__chunk_5027,be=t.__chunk_2738,we=t.__chunk_2113,Se=t.__chunk_5065,Oe=t.__chunk_5514,Ae=t.__chunk_2860,Ie=t.__chunk_5257,Pe=t.__chunk_8427,$e=t.__chunk_8997,Ce=t.__chunk_8024,Fe=t.__chunk_2403,Me=t.__chunk_8690,je=t.__chunk_6265,Le=t.__chunk_5492,Ke=t.__chunk_3059,Ue=t.__chunk_8610,Be=t.__chunk_7959,De=t.__chunk_4303,He=t.__chunk_3326,Xe=t.__chunk_391,qe=t.__chunk_8789,We=t.__chunk_552,Ge=t.__chunk_7649,Ze=t.__chunk_2501,Ve=t.__chunk_6443,Ye=t.__chunk_1616,ze=t.__chunk_2034,Je=t.__chunk_3131,Qe=t.__chunk_2328,et=te(v,v,v),tt=et.__chunk_6051,q=ne(v,v,v),nt=q.__NEXT_FONT_MANIFEST,_t=q.__REACT_LOADABLE_MANIFEST,at=q.__BUILD_MANIFEST,it=((s,i,$)=>(i._ENTRIES={},s.__BUILD_MANIFEST=at,s.__REACT_LOADABLE_MANIFEST=_t,s.__NEXT_FONT_MANIFEST=nt,s.__INTERCEPTION_ROUTE_REWRITE_MANIFEST="[]",s.__PRERENDER_MANIFEST='{"version":4,"routes":{"/":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/page,_N_T_/"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/","dataRoute":"/index.rsc"},"/about":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/about/layout,_N_T_/about/page,_N_T_/about"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/about","dataRoute":"/about.rsc"},"/contact":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/contact/layout,_N_T_/contact/page,_N_T_/contact"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/contact","dataRoute":"/contact.rsc"},"/terms":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/terms/layout,_N_T_/terms/page,_N_T_/terms"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/terms","dataRoute":"/terms.rsc"},"/affiliate-disclosure":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/affiliate-disclosure/layout,_N_T_/affiliate-disclosure/page,_N_T_/affiliate-disclosure"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/affiliate-disclosure","dataRoute":"/affiliate-disclosure.rsc"},"/status":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/status/layout,_N_T_/status/page,_N_T_/status"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/status","dataRoute":"/status.rsc"},"/flights":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/flights/layout,_N_T_/flights/page,_N_T_/flights"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/flights","dataRoute":"/flights.rsc"},"/privacy":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/privacy/layout,_N_T_/privacy/page,_N_T_/privacy"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/privacy","dataRoute":"/privacy.rsc"},"/hotels":{"initialHeaders":{"x-next-cache-tags":"_N_T_/layout,_N_T_/hotels/layout,_N_T_/hotels/page,_N_T_/hotels"},"experimentalBypassFor":[{"type":"header","key":"Next-Action"},{"type":"header","key":"content-type","value":"multipart/form-data;.*"}],"initialRevalidateSeconds":false,"srcRoute":"/hotels","dataRoute":"/hotels.rsc"}},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"process.env.__NEXT_PREVIEW_MODE_ID","previewModeSigningKey":"process.env.__NEXT_PREVIEW_MODE_SIGNING_KEY","previewModeEncryptionKey":"process.env.__NEXT_PREVIEW_MODE_ENCRYPTION_KEY"}}',(()=>{"use strict";var k={},y={};function a(n){var u=y[n];if(u!==void 0)return u.exports;var c=y[n]={exports:{}},g=!0;try{k[n](c,c.exports,a),g=!1}finally{g&&delete y[n]}return c.exports}a.m=k,a.amdO={},(()=>{var n=[];a.O=(u,c,g,f)=>{if(c){f=f||0;for(var l=n.length;l>0&&n[l-1][2]>f;l--)n[l]=n[l-1];n[l]=[c,g,f];return}for(var m=1/0,l=0;l<n.length;l++){for(var[c,g,f]=n[l],p=!0,N=0;N<c.length;N++)m>=f&&Object.keys(a.O).every(P=>a.O[P](c[N]))?c.splice(N--,1):(p=!1,f<m&&(m=f));if(p){n.splice(l--,1);var w=g();w!==void 0&&(u=w)}}return u}})(),a.n=n=>{var u=n&&n.__esModule?()=>n.default:()=>n;return a.d(u,{a:u}),u},a.d=(n,u)=>{for(var c in u)a.o(u,c)&&!a.o(n,c)&&Object.defineProperty(n,c,{enumerable:!0,get:u[c]})},a.e=()=>Promise.resolve(),a.g=function(){if(typeof i=="object")return i;try{return this||Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(n,u)=>Object.prototype.hasOwnProperty.call(n,u),a.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},(()=>{var n={993:0};a.O.j=g=>n[g]===0;var u=(g,f)=>{var l,m,[p,N,w]=f,S=0;if(p.some(I=>n[I]!==0)){for(l in N)a.o(N,l)&&(a.m[l]=N[l]);if(w)var C=w(a)}for(g&&g(f);S<p.length;S++)m=p[S],a.o(n,m)&&n[m]&&n[m][0](),n[m]=0;return a.O(C)},c=s.webpackChunk_N_E=s.webpackChunk_N_E||[];c.forEach(u.bind(null,0)),c.push=u.bind(null,c.push.bind(c))})()})(),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[755],{2328:Qe,3131:Je,2034:ze,1616:Ye,6443:Ve,2501:Ze,7649:Ge,552:We,8789:qe,391:Xe,3326:He,4303:De,7959:Be,8610:Ue,3059:Ke,5492:Le,6265:je,8690:Me,2403:Fe,8024:Ce,8997:$e,8427:Pe,5257:Ie,2860:Ae,5514:Oe,5065:Se,2113:we,2738:be,5027:Te,8260:Ee,5767:ve,6617:Re,5376:Ne,7398:xe,1673:me,1812:fe,8978:ge,3412:ye,4123:ke,74:de,9307:pe,9859:he,9814:le,6765:ie,8536:ue,5524:se,5612:ce,2780:oe,1548:re}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[51],{6051:tt}]),(s.webpackChunk_N_E=s.webpackChunk_N_E||[]).push([[340],{2067:ae,6195:_e,4372:(k,y,a)=>{"use strict";a.r(y),a.d(y,{ComponentMod:()=>U,default:()=>B});var n={};a.r(n),a.d(n,{POST:()=>C,runtime:()=>N});var u={};a.r(u),a.d(u,{originalPathname:()=>L,patchFetch:()=>K,requestAsyncStorage:()=>F,routeModule:()=>I,serverHooks:()=>j,staticGenerationAsyncStorage:()=>P});var c=a(8260),g=a(5514),f=a(2860),l=a(2113),m=a(5492),p=a(6051);let N="edge",w=p.Ry({city:p.Z_().min(2),checkIn:p.Z_(),checkOut:p.Z_(),guests:p.Rx().min(1).max(10).default(2),maxPrice:p.Rx().optional(),currency:p.Z_().default("SAR")}),S=[{name:"\u0641\u0646\u062F\u0642 \u0627\u0644\u0631\u064A\u062A\u0632 \u0643\u0627\u0631\u0644\u062A\u0648\u0646 \u0627\u0644\u0631\u064A\u0627\u0636",stars:5,price:2500,currency:"SAR",location:"\u0627\u0644\u0631\u064A\u0627\u0636",thumbnail:"",deepLink:"#"},{name:"\u0641\u0646\u062F\u0642 \u0641\u064A\u0631\u0645\u0648\u0646\u062A \u0627\u0644\u0631\u064A\u0627\u0636",stars:5,price:1800,currency:"SAR",location:"\u0627\u0644\u0631\u064A\u0627\u0636",thumbnail:"",deepLink:"#"},{name:"\u0641\u0646\u062F\u0642 \u0647\u064A\u0644\u062A\u0648\u0646 \u0627\u0644\u0631\u064A\u0627\u0636",stars:4,price:1200,currency:"SAR",location:"\u0627\u0644\u0631\u064A\u0627\u0636",thumbnail:"",deepLink:"#"}];async function C(D){try{let b=await D.json(),x=w.parse(b),R=process.env.TP_TOKEN,e=process.env.TP_MARKER;if(!R||!e)return m.xk.json({success:!0,data:S,mock:!0,widgetFallback:!0});let o=h=>new Date(h).toISOString().split("T")[0],r=new URLSearchParams({location:x.city,checkIn:o(x.checkIn),checkOut:o(x.checkOut),adults:String(x.guests),currency:x.currency,limit:"20",token:R}),_=await fetch(`https://engine.hotellook.com/api/v2/search/start.json?${r}`);if(!_.ok)throw Error("start failed");let E=await _.json();await new Promise(h=>setTimeout(h,2e3));let d=await fetch(`https://engine.hotellook.com/api/v2/search/getResult.json?searchId=${E.searchId}&limit=20&token=${R}`);if(!d.ok)throw Error("result failed");let T=((await d.json()).result??[]).map(h=>({name:h.hotelName,stars:h.stars||0,price:h.priceFrom,currency:x.currency,location:h.location?.name||x.city,thumbnail:h.photoUrl||"",deepLink:`https://www.hotellook.com/hotels/${h.hotelId}?checkIn=${x.checkIn}&checkOut=${x.checkOut}&adults=${x.guests}${e?`&marker=${e}`:""}`}));return m.xk.json({success:!0,data:T.length?T:S,mock:T.length===0})}catch(b){return console.error("Hotel search error",b),m.xk.json({success:!0,data:S,mock:!0,widgetFallback:!0,error:"fallback"})}}let I=new g.AppRouteRouteModule({definition:{kind:f.x.APP_ROUTE,page:"/api/hotels/search/route",pathname:"/api/hotels/search",filename:"route",bundlePath:"app/api/hotels/search/route"},resolvedPagePath:"/Users/meshalalsalem/Desktop/myflysmart/app/api/hotels/search/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:F,staticGenerationAsyncStorage:P,serverHooks:j}=I,L="/api/hotels/search/route";function K(){return(0,l.XH)({serverHooks:j,staticGenerationAsyncStorage:P})}let U=u,B=c.a.wrap(I)}},k=>{var y=n=>k(k.s=n);k.O(0,[755,51],()=>y(4372));var a=k.O();(i._ENTRIES=typeof i._ENTRIES>"u"?{}:i._ENTRIES)["middleware_app/api/hotels/search/route"]=a}]),function(){let k={exports:{},loaded:!1};return function(a,n){var u=Object.create,c=Object.defineProperty,g=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,l=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,p=e=>c(e,"__esModule",{value:!0}),N=(e,o)=>{p(e);for(var r in o)c(e,r,{get:o[r],enumerable:!0})},w=(e,o,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let _ of f(o))!m.call(e,_)&&_!=="default"&&c(e,_,{get:()=>o[_],enumerable:!(r=g(o,_))||r.enumerable});return e},S=e=>w(p(c(e!=null?u(l(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);N(n,{default:()=>D});var C=S((Z(),Q(M))),I="@next/request-context",F=Symbol.for(I),P=Symbol.for("internal.storage");function j(){let e=i;if(!e[F]){let o=new C.AsyncLocalStorage,r={get:()=>o.getStore(),[P]:o};e[F]=r}return e[F]}var L=j();function K(e,o){return L[P].run(e,o)}function U(e){let o={};return e&&e.forEach((r,_)=>{o[_]=r,_.toLowerCase()==="set-cookie"&&(o[_]=B(r))}),o}function B(e){let o=[],r=0,_,E,d,T,h;function O(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function A(){return E=e.charAt(r),E!=="="&&E!==";"&&E!==","}for(;r<e.length;){for(_=r,h=!1;O();)if(E=e.charAt(r),E===","){for(d=r,r+=1,O(),T=r;r<e.length&&A();)r+=1;r<e.length&&e.charAt(r)==="="?(h=!0,r=T,o.push(e.substring(_,d)),_=r):r=d+1}else r+=1;(!h||r>=e.length)&&o.push(e.substring(_,e.length))}return o}function D(e){let o=e.staticRoutes.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page})),r=e.dynamicRoutes?.map(_=>({regexp:new RegExp(_.namedRegex),page:_.page}))||[];return async function(_,E){let d=new URL(_.url).pathname,T={};if(e.nextConfig?.basePath&&d.startsWith(e.nextConfig.basePath)&&(d=d.replace(e.nextConfig.basePath,"")||"/"),e.nextConfig?.i18n)for(let O of e.nextConfig.i18n.locales){let A=new RegExp(`^/${O}($|/)`,"i");if(d.match(A)){d=d.replace(A,"/")||"/";break}}for(let O of o)if(O.regexp.exec(d)){T.name=O.page;break}if(!T.name){let O=x(d);for(let A of r||[]){if(O&&!x(A.page))continue;let W=A.regexp.exec(d);if(W){T={name:A.page,params:W.groups};break}}}let h=await K({waitUntil:E.waitUntil},()=>i._ENTRIES[`middleware_${e.name}`].default.call({},{request:{url:_.url,method:_.method,headers:U(_.headers),ip:b(_.headers,R.Ip),geo:{city:b(_.headers,R.City,!0),country:b(_.headers,R.Country,!0),latitude:b(_.headers,R.Latitude),longitude:b(_.headers,R.Longitude),region:b(_.headers,R.Region,!0)},nextConfig:e.nextConfig,page:T,body:_.body}}));return h.waitUntil&&E.waitUntil(h.waitUntil),h.response}}function b(e,o,r=!1){let _=e.get(o)||void 0;return r&&_?decodeURIComponent(_):_}function x(e){return e==="/api"||e.startsWith("/api/")}var R;(function(e){e.City="x-vercel-ip-city",e.Country="x-vercel-ip-country",e.Ip="x-real-ip",e.Latitude="x-vercel-ip-latitude",e.Longitude="x-vercel-ip-longitude",e.Region="x-vercel-ip-country-region"})(R||(R={}))}(k,k.exports),k.exports}.call({}).default({name:"app/api/hotels/search/route",staticRoutes:[{page:"/",regex:"^/(?:/)?$",routeKeys:{},namedRegex:"^/(?:/)?$"},{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"},{page:"/about",regex:"^/about(?:/)?$",routeKeys:{},namedRegex:"^/about(?:/)?$"},{page:"/affiliate-disclosure",regex:"^/affiliate\\-disclosure(?:/)?$",routeKeys:{},namedRegex:"^/affiliate\\-disclosure(?:/)?$"},{page:"/contact",regex:"^/contact(?:/)?$",routeKeys:{},namedRegex:"^/contact(?:/)?$"},{page:"/flights",regex:"^/flights(?:/)?$",routeKeys:{},namedRegex:"^/flights(?:/)?$"},{page:"/hotels",regex:"^/hotels(?:/)?$",routeKeys:{},namedRegex:"^/hotels(?:/)?$"},{page:"/privacy",regex:"^/privacy(?:/)?$",routeKeys:{},namedRegex:"^/privacy(?:/)?$"},{page:"/status",regex:"^/status(?:/)?$",routeKeys:{},namedRegex:"^/status(?:/)?$"},{page:"/terms",regex:"^/terms(?:/)?$",routeKeys:{},namedRegex:"^/terms(?:/)?$"}],dynamicRoutes:[],nextConfig:{basePath:"",i18n:{locales:["ar","en"],defaultLocale:"ar"}}})))(v,v,v);export{it as default};
